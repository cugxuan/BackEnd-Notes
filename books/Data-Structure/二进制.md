# 二进制
[[toc]]

## 二进制的位操作

- 左移 乘 2
- 右移 除 2

在 java 中定义了**逻辑右移**和**算术右移**，逻辑右移用>>>表示，算术右移用>>表示

C++ 中根据类型是否 signed 编译器自动判断，unsigned 使用逻辑右移，signed 使用算术右移

逻辑右移：直接将所有位右移，左边补 0 即可

算术右移：保持符号位不变，除符号位之外的右移一位并补符号位 1。补的 1 仍然在符号位之后
注：左移的时候不需要考虑，因为负数使用补码的形式存储，不会影响

## 补码

正数的补码 = 原码

负数的补码 = {原码符号位不变} + {数值位按位取反后+1} or
= {原码符号位不变} + {数值位从右边数第一个 1 及其右边的 0 保持不变,左边安位取反}

以十进制整数 +97 和-97 为例：

- +97 原码 = 0110_0001b
- +97 补码 = 0110_0001b
- -97 原码 = 1110_0001b
- -97 补码 = 1001_1111b

## 题目

「单选题」计算 1 到 128 所有位上 1 的个数
https://www.nowcoder.com/questionTerminal/a26078a2d13548349ca54a518a94d790

用二进制表示十进制数 1 到 4，分别为 1、10、11、100，这些二进制数所有位上 1 的个数共有 5 个。那么，用二进制表示的十进制数 1 到 128，所有位上 1 的个数共有`________`个。

- A. 448
- B. 449
- C. 1024
- D. 1025

「编程题」二进制中有多少个 1 - 剑指 offer
https://www.nowcoder.com/practice/8ee967e43c2c4ec193b040ea7fbb10b8

[题解](#题解)

---

## 题解

「单选题」计算 1 到 128 所有位上 1 的个数

128 对应的二进制的有 8 位，从 1 到 128，每个位置的 0 和 1 是交替的，前 7 位 0 和 1 的出现次数是相等的（这个很好理解，举个简单的例子，对于 001 到 100 之间的数是 001 010 011 100 ，对于前两位来说，可以看到 0 和 1 的数量是相等的）。所以有 `7*128/2 = 448`，注意还需要加上 128 对应的 8 位上的 1，所以一共是 449 个，选 B

「编程题」二进制中有多少个 1 - 剑指 offer

<details>
<summary>Code</summary>

<<<@/books/code/ds/剑指offer-11.cpp

</details>

